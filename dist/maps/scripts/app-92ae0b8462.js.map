{"version":3,"sources":["scripts/app-92ae0b8462.js"],"names":["angular","module","Storage","$window","remove","key","localStorageSupported","localStorage","removeItem","prefix","storageObject","get","bootstrap","fromJson","getItem","checkLocalStorage","setItem","e","hasOwnProperty","value","save","noPersistency","toJson","items","storageFactory","$inject","factory","SingleProduct","directive","restrict","templateUrl","scope","product","acmeNavbar","title","backButton","backCallback","ApiFactory","$http","apiEndpoint","getProductList","params","proxy","getSingleProduct","ApiFactoryFactory","MainController","$rootScope","$timeout","$log","productList","vm","this","pageTitle","data","articles","showSingleProd","item","offline","alert","config","url","Url","loading","then","res","singleProductOpenStart","singleProductOpenDone","prodDetails","details","trim","img","PictureUrl","price","Price","err","error","controller","runBlock","addEventListener","log","$on","stateIsLoading","debug","run","routerConfig","$stateProvider","$urlRouterProvider","state","controllerAs","resolve","nbArticles","otherwise","constant","moment","host","$logProvider","debugEnabled","$templateCache","put"],"mappings":"CAAA,WACE,YAOAA,SACGC,OAAO,WAAY,YAAa,YAAa,UAAW,aAAc,aAAc,SAAU,aAAc,YAAa,eAAgB,cAG7I,WACG,YAaE,SAASC,GACPC,GAkBA,QAASC,GAAOC,GACRC,GACAH,EAAQI,aAAaC,WAAWC,EAASJ,GAG7CK,EAAcL,GAAO,KAGzB,QAASM,GAAIN,EAAKO,GAGhB,MAAIA,IACIN,EACON,QAAQa,SAASV,EAAQI,aAAaO,QAAQL,EAASJ,IAG/DK,EAAcL,GAGvB,QAASU,KACL,IAGI,MAFAZ,GAAQI,aAAaS,QAAQ,4BAA6B,KAC1Db,EAAQI,aAAaC,WAAW,8BACzB,EACT,MAAOS,GACL,OAAO,GAIf,QAASL,KACL,IAAK,GAAIP,KAAOK,GACZ,GAAIA,EAAcQ,eAAeb,GAAM,CACnC,GAAIc,GAAQR,EAAIN,GAAK,EACrBK,GAAcL,GAAOc,GAKjC,QAASC,GAAKf,EAAKc,EAAOE,GACtBX,EAAcL,GAAOc,EAClBE,GAKCf,GACAH,EAAQI,aAAaS,QAAQP,EAASJ,EAAKL,QAAQsB,OAAOH,IA9DlE,GAAIT,IAEFa,MAAO,MAELd,EAAS,WACTH,EAAwBS,IAExBS,GACAJ,KAAMA,EACNhB,OAAQA,EACRO,IAAKA,EACLC,UAAWA,EAGf,OAAOY,GApBXtB,EAAQuB,SAAW,WAAnBzB,QAAQC,OAAO,WACVyB,QAAQ,UAAWxB,MAyE5B,WACE,YAOA,SAASyB,KACP,GAAIC,IACFC,SAAU,IACVC,YAAa,oDACbC,OACIC,QAAS,KAIf,OAAOJ,GAdT5B,QACGC,OAAO,WACP2B,UAAU,gBAAiBD,MAiBhC,WACE,YAOA,SAASM,KACP,GAAIL,IACFC,SAAU,IACVC,YAAa,oCACbC,OACEG,MAAO,IACPC,WAAY,IACZC,aAAc,KAIlB,OAAOR,GAhBT5B,QACGC,OAAO,WACP2B,UAAU,aAAcK,MAmB5B,WACG,YAeE,SAASI,GACPC,EAAOC,GAyBP,QAASC,GAAeC,GACtB,MAAOH,GAAM3B,IAAI4B,EAAYG,MAAQ,YAAaD;;;;;;;;;;;;;;;AAkBpD,QAASE,GAAiBF,GACxB,MAAOH,GAAM3B,IAAI4B,EAAYG,MAAQ,oBAAqBD,GA3C5D,GAAIG,IAEAJ,eAAgBA,EAChBG,iBAAkBA,EAGtB,OAAOC,GAXXP,EAAWZ,SAAW,QAAS,eAD/BzB,QAAQC,OAAO,WACVyB,QAAQ,aAAcW,MAsD/B,WACE,YAuBA,SAASQ,GAAeC,EAAYC,EAAUC,EAAM7C,EAAS8C,EAAaZ,GACxE,GAAIa,GAAKC,IACTD,GAAGE,UAAY,kBACfF,EAAGD,YAAcA,EAAYI,KAAKC,SAGlCJ,EAAGK,eAAiB,SAASC,GAC3B,GAAGV,EAAWW,QAEZ,WADAC,OAAM,8BAIR,IAAIC,IACFlB,QACEmB,IAAKJ,EAAKK,KAKdf,GAAWgB,SAAU,EAGrBzB,EAAWM,iBAAiBgB,GAAQI,KAAK,SAASC,GAChDlB,EAAWgB,SAAU,EACrBZ,EAAGe,wBAAyB,EAC5Bf,EAAGE,UAAY,mBAEfL,EAAS,WACPG,EAAGgB,uBAAwB,GAC1B,KAGHhB,EAAGiB,aACDC,QAASJ,EAAIX,KAAKgB,OAClBC,IAAKd,EAAKe,WACVC,MAAOhB,EAAKiB,QAEd,SAAeC,GACf1B,EAAK2B,MAAMD,MAIfxB,EAAGd,aAAe,WAChBc,EAAGgB,uBAAwB,EAC3BhB,EAAGe,wBAAyB,EAC5Bf,EAAGE,UAAY,mBAhDnBP,EAAepB,SAAW,aAAc,WAAY,OAAQ,UAAW,cAAe,cAFtFzB,QACGC,OAAO,WACP2E,WAAW,iBAAkB/B,MAqDlC,WACE,YAgBA,SAASgC,GAAS7B,EAAMF,EAAY3C,EAASD,GAC3CA,EAAQU,YAERT,EAAQ2E,iBAAiB,UAAW,WAEhChC,EAAWW,SAAU,EACrBT,EAAK+B,IAAI,qBACV,EAEH,IAAIhD,GAAQe,CACZf,GAAMiD,IAAI,oBAAoB,WAC5BjD,EAAMkD,gBAAiB,IAGzBjC,EAAKkC,MAAM,gBAhBbL,EAASpD,SAAW,OAAQ,aAAc,UAAW,WAHrDzB,QACGC,OAAO,WACPkF,IAAIN,MAsBT,WACE,YAeA,SAASO,GAAaC,EAAgBC,GACpCD,EAYGE,MAAM,QACL3B,IAAK,IACL9B,YAAa,qBACb8C,WAAY,iBACZY,aAAc,OACdC,SACExC,aAMG,aAAc,UAAW,aAL1B,SAAUZ,EAAYnC,EAAS4C,GAC7B,GAAIa,IACFlB,QACEiD,WAAY,IAUhB,OAAOrD,GAAWG,eAAemB,QAK3C2B,EAAmBK,UAAU,KAvC/BP,EAAa3D,SAAW,iBAAkB,sBAJ1CzB,QACGC,OAAO,WACP0D,OAAOyB,MA+CZ,WACE,YAYApF,SACGC,OAAO,WACL2F,SAAS,SAAUC,QACnBD,SAAS,eACNE,KAAM,yBACNpD,MAAO,6BAIjB,WACE,YAgBA,SAASiB,GAAOoC,GAEdA,EAAaC,cAAa,GAF5BrC,EAAOlC,SAAW,gBALlBzB,QACGC,OAAO,WACP0D,OAAOA,MAUZ3D,QAAQC,OAAO,WAAWkF,KAAK,iBAAkB,SAASc,GAAiBA,EAAeC,IAAI,qBAAqB,8pBACnHD,EAAeC,IAAI,oCAAoC,sPACvDD,EAAeC,IAAI,oDAAoD","file":"scripts/app-92ae0b8462.js","sourcesContent":["(function() {\n  'use strict';\n  /**\n   * @ngdoc overview\n   * @name tamedia\n   * @description\n   * Main module of the tamedia application.\n   */\n  angular\n    .module('tamedia', ['ngAnimate', 'ngCookies', 'ngTouch', 'ngSanitize', 'ngMessages', 'ngAria', 'ngResource', 'ui.router', 'ui.bootstrap', 'toastr']);\n})();\n\n(function() {\n    'use strict';\n    /**\n     * @ngdoc service\n     * @name tamedia.factory:storage\n     *\n     * @description\n     * Works with a localstorage\n     *\n     *\n     */\n    angular.module('tamedia')\n        .factory('Storage', Storage);\n\n      function Storage(\n        $window\n      ){\n        var storageObject = {\n          // Declare all possible storage objects (they are used for bootstrapping)\n          items: null\n        };\n        var prefix = 'tamedia-';\n        var localStorageSupported = checkLocalStorage();\n\n        var storageFactory = {\n            save: save,\n            remove: remove,\n            get: get,\n            bootstrap: bootstrap\n        };\n\n        return storageFactory;\n\n        function remove(key) {\n            if (localStorageSupported) {\n                $window.localStorage.removeItem(prefix + key);\n            }\n            // Don't delete keys since they might be needed for bootstrap\n            storageObject[key] = null;\n        }\n\n        function get(key, bootstrap) {\n          // Only return from localStorage during bootstrap\n          // Use in-memory storage instead\n          if (bootstrap) {\n              if (localStorageSupported) {\n                  return angular.fromJson($window.localStorage.getItem(prefix + key));\n              }\n          }\n          return storageObject[key];\n        }\n\n        function checkLocalStorage() {\n            try {\n                $window.localStorage.setItem('tamedia.checkLocalStorage', '1');\n                $window.localStorage.removeItem('tamedia.checkLocalStorage');\n                return true;\n            } catch (e) {\n                return false;\n            }\n        }\n\n        function bootstrap() {\n            for (var key in storageObject) {\n                if (storageObject.hasOwnProperty(key)) {\n                    var value = get(key, true);\n                    storageObject[key] = value;\n                }\n            }\n        }\n\n        function save(key, value, noPersistency) {\n            storageObject[key] = value;\n            if(noPersistency){\n                // Use noPersistency if object should only be saved for\n                // the duration of the session\n                return;\n            }\n            if (localStorageSupported) {\n                $window.localStorage.setItem(prefix + key, angular.toJson(value));\n        }\n      }\n    }\n}());\n\n(function() {\n  'use strict';\n\n  angular\n    .module('tamedia')\n    .directive('singleProduct', SingleProduct);\n\n  /** @ngInject */\n  function SingleProduct() {\n    var directive = {\n      restrict: 'E',\n      templateUrl: 'app/components/single_product/single.product.html',\n      scope: {\n          product: '='\n      }\n    };\n\n    return directive;\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('tamedia')\n    .directive('acmeNavbar', acmeNavbar);\n\n  /** @ngInject */\n  function acmeNavbar() {\n    var directive = {\n      restrict: 'E',\n      templateUrl: 'app/components/navbar/navbar.html',\n      scope:{\n        title: '=',\n        backButton: '=',\n        backCallback: '='\n      }\n    };\n\n    return directive;\n  }\n\n})();\n\n(function() {\n    'use strict';\n    /**\n     * @ngdoc service\n     * @name tamedia.factory:ApiFactory\n     *\n     * @description\n     * POST method of the Account API\n     *\n     * @requires $http\n     * @requires apiEndpoint\n     *\n     */\n    angular.module('tamedia')\n        .factory('ApiFactory', ApiFactory);\n\n      function ApiFactory(\n        $http, apiEndpoint\n      ){\n        var ApiFactoryFactory = {\n            // GET Methods\n            getProductList: getProductList,\n            getSingleProduct: getSingleProduct\n        };\n\n        return ApiFactoryFactory;\n\n        /**\n         * @ngdoc\n         * @name tamedia.factory:ApiFactory#getProductList\n         * @methodOf tamedia.factory:ApiFactory\n         *\n         * @description\n         * GET method of the Account API\n         *\n         * @param {object} paramsObject Accepts params object in this format:\n         * <pre>\n         * params:{\n         *  nbArticles: 20\n         * }\n         * </pre>\n        */\n        function getProductList(params) {\n          return $http.get(apiEndpoint.proxy + '/articles', params);\n        }\n\n        /**\n         * @ngdoc\n         * @name tamedia.factory:ApiFactory#getSingleProduct\n         * @methodOf tamedia.factory:ApiFactory\n         *\n         * @description\n         * GET method of the Account API, get single product details\n         *\n         * @param {object} paramsObject Accepts params object in this format:\n         * <pre>\n         * params:{\n         *  url: \"https://www.ricardo.ch/kaufen/haushalt-und-wohnen/badezimmer/wc/automatischer-wc-sitz-mit/v/an855739648/\"\n         * }\n         * </pre>\n        */\n        function getSingleProduct(params) {\n          return $http.get(apiEndpoint.proxy + '/getSingleArticle', params);\n        }\n\n    }\n}());\n\n(function() {\n  'use strict';\n\n  /**\n   * @ngdoc service\n   * @name tamedia.controller:MainController\n   *\n   * @description\n   * Home view controller\n   *\n   * @requires productList\n   * @requires ApiFactory\n   * @requires $rootScope\n   * @requires $timeout\n   * @requires $rootScope\n   * @requires $window\n   *\n   */\n\n  angular\n    .module('tamedia')\n    .controller('MainController', MainController);\n\n  /** @ngInject */\n  function MainController($rootScope, $timeout, $log, $window, productList, ApiFactory) {\n    var vm = this;\n    vm.pageTitle = \"Latest products\";\n    vm.productList = productList.data.articles;\n\n    // Handles click on a product\n    vm.showSingleProd = function(item){\n      if($rootScope.offline){\n        alert('You are offline, try later!');\n        return;\n      }\n\n      var config = {\n        params: {\n          url: item.Url\n        }\n      };\n\n      // Show loader\n      $rootScope.loading = true;\n\n      // API call\n      ApiFactory.getSingleProduct(config).then(function(res){\n        $rootScope.loading = false; // Hide loader\n        vm.singleProductOpenStart = true; // Slide in product details\n        vm.pageTitle = \"Product overview\"; // Set page title\n\n        $timeout(function(){\n          vm.singleProductOpenDone = true;\n        }, 400);\n\n        // Bind product details to view\n        vm.prodDetails = {\n          details: res.data.trim(),\n          img: item.PictureUrl,\n          price: item.Price\n        };\n      },function error(err){\n        $log.error(err);\n      });\n    }\n\n    vm.backCallback = function(){\n      vm.singleProductOpenDone = false;\n      vm.singleProductOpenStart = false;\n      vm.pageTitle = \"Latest products\";\n    }\n  }\n})();\n\n(function() {\n  'use strict';\n\n  /**\n  * @ngdoc overview\n  * @name tamedia.run\n  *\n  * @description\n  * Front-end application run block.\n  * Runs only once, right after application bootstrap!\n  */\n\n  angular\n    .module('tamedia')\n    .run(runBlock);\n\n  /** @ngInject */\n  function runBlock($log, $rootScope, $window, Storage) {\n    Storage.bootstrap();\n\n    $window.addEventListener('offline', function() {\n        // Queue up events for server.\n        $rootScope.offline = true;\n        $log.log('you are offline');\n    }, false);\n\n    var scope = $rootScope;\n    scope.$on('$stateChangeStart',function(){\n      scope.stateIsLoading = true;\n    });\n\n    $log.debug('runBlock end');\n  }\n\n})();\n\n(function() {\n  'use strict';\n  /**\n   * @ngdoc overview\n   * @name router\n   *\n   * @description\n   * Application routes\n   *\n   */\n\n  angular\n    .module('tamedia')\n    .config(routerConfig);\n\n  /** @ngInject */\n  function routerConfig($stateProvider, $urlRouterProvider) {\n    $stateProvider\n      /**\n       * @ngdoc overview\n       * @name tamedia.route:home\n       *\n       * @description\n       * Home screen route, showing product list\n       *\n       * @requires tamedia.factory:ApiFactory\n       * @requires tamedia.controller:MainController\n       * @requires tamedia.factory:Storage\n       */\n      .state('home', {\n        url: '/',\n        templateUrl: 'app/main/main.html',\n        controller: 'MainController',\n        controllerAs: 'main',\n        resolve: {\n          productList: /** @ngInject */\n            function (ApiFactory, Storage, $rootScope) {\n              var config = {\n                params:{\n                  nbArticles: 20\n                }\n              };\n\n              // if($rootScope.offline){\n              //   return {\n              //     data: Storage.get('items')\n              //   }\n              // }\n\n              return ApiFactory.getProductList(config);\n            }\n        }\n      });\n\n    $urlRouterProvider.otherwise('/');\n  }\n\n})();\n\n/* global moment:false */\n(function() {\n  'use strict';\n\n  /**\n   * @ngdoc configuration\n   * @name tamedia.config\n   * @methodOf tamedia.config\n   *\n   * @description\n   * tamedia application constans\n   *\n   */\n\n  angular\n    .module('tamedia')\n      .constant('moment', moment)\n      .constant('apiEndpoint', {\n          host: 'https://www.ricardo.ch',\n          proxy: 'http://localhost:8090'\n      })\n})();\n\n(function() {\n  'use strict';\n\n  /**\n   * @ngdoc configuration\n   * @name tamedia.config\n   * @methodOf tamedia.config\n   *\n   * @description\n   * tamedia application configuration\n   *\n   */\n  angular\n    .module('tamedia')\n    .config(config);\n\n  /** @ngInject */\n  function config($logProvider) {\n    // Enable log\n    $logProvider.debugEnabled(true);\n  }\n\n})();\n\nangular.module(\"tamedia\").run([\"$templateCache\", function($templateCache) {$templateCache.put(\"app/main/main.html\",\"<div class=\\\"product-list\\\" ng-class=\\\"{\\'open\\': main.singleProductOpenStart, \\'opened\\': main.singleProductOpenDone}\\\"><acme-navbar title=\\\"main.pageTitle\\\" back-button=\\\"main.singleProductOpenStart\\\" back-callback=\\\"main.backCallback\\\"></acme-navbar><single-product product=\\\"main.prodDetails\\\"></single-product><div class=\\\"container main-view-holder\\\"><div class=\\\"row\\\"><ul class=\\\"container-list\\\"><li ng-repeat=\\\"item in main.productList\\\" ng-click=\\\"main.showSingleProd(item)\\\" class=\\\"clearfix\\\"><div class=\\\"col-sm-12 text-left text-center-xs\\\">{{item.Title}}<br><b>Price:&nbsp;</b>{{item.Price}}<br><b>Buy Now Price:&nbsp;</b>{{item.BuyNowPrice}}</div></li></ul></div></div></div>\");\n$templateCache.put(\"app/components/navbar/navbar.html\",\"<div class=\\\"head-stripe\\\"><div class=\\\"container\\\"><h2 ng-class=\\\"{backShow: backButton}\\\" ng-click=\\\"backCallback()\\\"><span ng-if=\\\"backButton\\\"><span class=\\\"glyphicon glyphicon-arrow-left\\\" aria-hidden=\\\"true\\\"></span></span> {{title}}</h2></div></div>\");\n$templateCache.put(\"app/components/single_product/single.product.html\",\"<div class=\\\"single-product text-center\\\"><h1>Product details</h1><img ng-src=\\\"{{product.img}}\\\" alt=\\\"\\\"><br><br><p><b>Price:</b>&nbsp;{{product.price}}</p><p>{{product.details}}</p></div>\");}]);"],"sourceRoot":"/source/"}